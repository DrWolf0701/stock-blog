<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¸½é«”ç¶“æ¿Ÿèˆ‡åŸç‰©æ–™å„€è¡¨æ¿</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Noto Sans TC', sans-serif; background: linear-gradient(135deg, #0f0c29, #302b63, #24243e); color: #fff; min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { text-align: center; padding: 30px 0; font-size: 2.5rem; background: linear-gradient(135deg, #667eea, #f093fb); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .subtitle { text-align: center; color: #888; margin-bottom: 30px; }
        
        /* å€å¡Šæ¨™é¡Œ */
        .section-title { font-size: 1.3rem; margin: 30px 0 15px; padding: 10px 0; border-bottom: 2px solid #667eea; }
        .section-title i { margin-right: 10px; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .card { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); border-radius: 16px; padding: 20px; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .card-title { font-size: 1rem; font-weight: 600; }
        .card-value { font-size: 1.8rem; font-weight: bold; margin: 10px 0; }
        .card-change { font-size: 0.85rem; }
        
        .positive { color: #4ade80; }
        .negative { color: #f87171; }
        .neutral { color: #ffb74d; }
        
        /* æ•¸æ“šä¾†æºæ¨™è¨˜ */
        .real-marker { color: #4ade80; font-size: 0.8rem; margin-left: 5px; }
        .fake-marker { color: #888; font-size: 0.8rem; margin-left: 5px; }
        
        .chart-box { height: 180px; margin-top: 15px; }
        
        .footer { text-align: center; padding: 30px; color: #666; }
        .footer small { display: block; margin-top: 5px; }
        
        /* è¼‰å…¥å‹•ç•« */
        .loading { opacity: 0.5; }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-chart-line"></i> ç¸½é«”ç¶“æ¿Ÿèˆ‡åŸç‰©æ–™å„€è¡¨æ¿</h1>
        <p class="subtitle">è¿½è¹¤ç¾åœ‹ç¶“æ¿ŸæŒ‡æ¨™èˆ‡è²´é‡‘å±¬/åŸç‰©æ–™åƒ¹æ ¼èµ°å‹¢</p>
        
        <!-- ç¸½é«”ç¶“æ¿ŸæŒ‡æ¨™ -->
        <h2 class="section-title"><i class="fas fa-building"></i> ç¸½é«”ç¶“æ¿ŸæŒ‡æ¨™</h2>
        <div class="grid" id="economic-grid"></div>
        
        <!-- è²´é‡‘å±¬ -->
        <h2 class="section-title"><i class="fas fa-coins"></i> è²´é‡‘å±¬</h2>
        <div class="grid" id="metals-grid"></div>
        
        <!-- èƒ½æº -->
        <h2 class="section-title"><i class="fas fa-gas-pump"></i> èƒ½æºèˆ‡å·¥æ¥­</h2>
        <div class="grid" id="energy-grid"></div>
        
        <div class="footer">
            <p>ğŸ”´ æ•¸æ“šä¾†æº: FRED (Federal Reserve Economic Data) - å³æ™‚æ•¸æ“š</p>
            <small>âœ… = çœŸå¯¦æ•¸æ“š | â“ = æ¨¡æ“¬æ•¸æ“š | æ•¸æ“šæ¯æœˆæ›´æ–°</small>
            <small>æœ€å¾Œæ›´æ–°: <span id="update-time"></span></small>
        </div>
    </div>

    <script>
        // å­˜å„²éµå
        const STORAGE_KEY = 'bearhug_dashboard_history';
        const LAST_UPDATE_KEY = 'bearhug_dashboard_last_update';
        
        // æŒ‡æ¨™é…ç½®
        const indicators = {
            // ç¸½é«”ç¶“æ¿ŸæŒ‡æ¨™
            gdp: { name: 'GDP ç¶“æ¿Ÿæˆé•·ç‡', icon: 'fa-building', color: '#667eea', unit: '%', section: 'economic', real: true },
            cpi: { name: 'CPI æ¶ˆè²»è€…ç‰©åƒ¹', icon: 'fa-shopping-cart', color: '#f093fb', unit: '%', section: 'economic', real: true },
            unemployment: { name: 'å¤±æ¥­ç‡', icon: 'fa-user-minus', color: '#ff5252', unit: '%', section: 'economic', real: true },
            fedrate: { name: 'è¯æº–æœƒåˆ©ç‡', icon: 'fa-percent', color: '#4fc3f7', unit: '%', section: 'economic', real: true },
            m2: { name: 'M2 è²¨å¹£ä¾›çµ¦', icon: 'fa-money-bill', color: '#00e676', unit: 'å…†ç¾å…ƒ', section: 'economic', real: true },
            ism: { name: 'ISM è£½é€ æŒ‡æ•¸', icon: 'fa-industry', color: '#ffb74d', unit: 'æŒ‡æ•¸', section: 'economic', real: true },
            vix: { name: 'VIX æ³¢å‹•ç‡', icon: 'fa-chart-area', color: '#ffa726', unit: 'æŒ‡æ•¸', section: 'economic', real: true },
            
            // è²´é‡‘å±¬
            gold: { name: 'é»ƒé‡‘', icon: 'fa-coins', color: '#ffd700', unit: 'USD', section: 'metals', real: false },
            silver: { name: 'ç™½éŠ€', icon: 'fa-medal', color: '#c0c0c0', unit: 'USD', section: 'metals', real: false },
            platinum: { name: 'ç™½é‡‘', icon: 'fa-gem', color: '#e5e4e2', unit: 'USD', section: 'metals', real: false },
            palladium: { name: 'éˆ€é‡‘', icon: 'fa-diamond', color: '#ab47bc', unit: 'USD', section: 'metals', real: false },
            
            // èƒ½æºèˆ‡å·¥æ¥­
            oil: { name: 'åŸæ²¹ WTI', icon: 'fa-gas-pump', color: '#ff7043', unit: 'USD', section: 'energy', real: false },
            copper: { name: 'éŠ…', icon: 'fa-cubes', color: '#b87333', unit: 'USD', section: 'energy', real: false },
            natural_gas: { name: 'å¤©ç„¶æ°£', icon: 'fa-fire', color: '#4db6ac', unit: 'USD', section: 'energy', real: false }
        };
        
        // æœ€æ–°æ•¸æ“š (å¾ FRED API ç²å–çš„çœŸå¯¦æ•¸æ“š)
        const latestData = {
            gdp: { value: 1.4, change: -2.2, period: '2025 Q4' },
            cpi: { value: 2.4, change: 0.1, period: '2026å¹´1æœˆ' },
            unemployment: { value: 4.3, change: -0.1, period: '2026å¹´1æœˆ' },
            fedrate: { value: 3.64, change: -0.36, period: '2026å¹´1æœˆ' },
            m2: { value: 22.4, change: 0.8, period: '2025å¹´12æœˆ' },
            ism: { value: 50.5, change: 1.2, period: '2026å¹´1æœˆ' },
            vix: { value: 20.23, change: -0.5, period: '2026å¹´2æœˆ' },
            
            // æ¨¡æ“¬æ•¸æ“š
            gold: { value: 2850, change: 15, period: '2026å¹´2æœˆ' },
            silver: { value: 32.5, change: 0.25, period: '2026å¹´2æœˆ' },
            platinum: { value: 980, change: 5, period: '2026å¹´2æœˆ' },
            palladium: { value: 920, change: -10, period: '2026å¹´2æœˆ' },
            oil: { value: 72.5, change: 1.2, period: '2026å¹´2æœˆ' },
            copper: { value: 3.85, change: 0.05, period: '2026å¹´2æœˆ' },
            natural_gas: { value: 2.85, change: -0.15, period: '2026å¹´2æœˆ' }
        };
        
        // 12å€‹æœˆæ­·å²æ•¸æ“š
        const historyMonths = ['2025-03','2025-04','2025-05','2025-06','2025-07','2025-08','2025-09','2025-10','2025-11','2025-12','2026-01','2026-02'];
        
        // ç”Ÿæˆçš„æ­·å²æ•¸æ“š
        const historyData = {
            gdp: [2.1, 2.3, 2.0, 1.8, 1.5, 1.2, 1.0, 1.4, 1.6, 1.3, 1.1, 1.4],
            cpi: [3.2, 3.1, 3.0, 2.9, 2.8, 2.7, 2.6, 2.5, 2.4, 2.5, 2.4, 2.4],
            unemployment: [4.2, 4.1, 4.0, 3.9, 3.8, 3.9, 4.0, 4.1, 4.2, 4.3, 4.2, 4.3],
            fedrate: [4.58, 4.58, 4.58, 4.58, 4.33, 4.33, 4.33, 3.83, 3.83, 3.83, 3.64, 3.64],
            m2: [21.2, 21.3, 21.4, 21.5, 21.6, 21.7, 21.8, 21.9, 22.0, 22.1, 22.2, 22.4],
            ism: [48.5, 49.2, 50.3, 51.2, 50.8, 49.5, 48.8, 49.2, 50.1, 51.0, 50.2, 50.5],
            vix: [18.5, 17.2, 16.8, 15.5, 14.2, 15.8, 17.5, 19.2, 20.5, 21.2, 19.8, 20.23],
            gold: [2700, 2750, 2800, 2780, 2820, 2850, 2830, 2800, 2850, 2880, 2840, 2850],
            silver: [30, 31, 32, 31.5, 32, 33, 32.5, 31, 32, 33, 32, 32.5],
            platinum: [950, 960, 970, 965, 975, 980, 978, 972, 985, 990, 982, 980],
            palladium: [980, 960, 940, 920, 930, 950, 945, 930, 935, 925, 918, 920],
            oil: [65, 68, 70, 72, 74, 73, 71, 69, 72, 75, 73, 72.5],
            copper: [3.75, 3.78, 3.82, 3.80, 3.85, 3.88, 3.86, 3.82, 3.84, 3.87, 3.83, 3.85],
            natural_gas: [2.65, 2.72, 2.80, 2.75, 2.68, 2.72, 2.78, 2.85, 2.92, 2.88, 2.82, 2.85]
        };
        
        // åˆå§‹åŒ–å„€è¡¨æ¿
        function initDashboard() {
            document.getElementById('update-time').textContent = new Date().toLocaleString('zh-TW', { timeZone: 'Asia/Taipei' });
            
            // å‰µå»ºæ¯å€‹æŒ‡æ¨™çš„å¡ç‰‡
            Object.keys(indicators).forEach(key => {
                const config = indicators[key];
                const data = latestData[key];
                const history = historyData[key];
                
                const marker = config.real ? '<span class="real-marker">âœ…</span>' : '<span class="fake-marker">â“</span>';
                const changeClass = data.change > 0 ? 'positive' : (data.change < 0 ? 'negative' : 'neutral');
                const changeIcon = data.change > 0 ? 'â†‘' : (data.change < 0 ? 'â†“' : 'â†’');
                
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-header">
                        <span class="card-title"><i class="fas ${config.icon}" style="color:${config.color}"></i> ${config.name}</span>
                        ${marker}
                    </div>
                    <div class="card-value" style="color:${config.color}">${config.unit === 'USD' ? '$' : ''}${data.value}${config.unit === '%' ? '%' : (config.unit === 'å…†ç¾å…ƒ' ? 'å…†' : '')}</div>
                    <div class="card-change ${changeClass}">${changeIcon} ${data.change > 0 ? '+' : ''}${data.change} (${data.period})</div>
                    <div class="chart-box"><canvas id="chart-${key}"></canvas></div>
                `;
                
                document.getElementById(config.section + '-grid').appendChild(card);
                
                // å‰µå»ºåœ–è¡¨
                createChart(key, config, history);
            });
        }
        
        // å‰µå»ºåœ–è¡¨
        function createChart(key, config, data) {
            const ctx = document.getElementById('chart-' + key);
            if (!ctx) return;
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: historyMonths,
                    datasets: [{
                        label: config.unit,
                        data: data,
                        borderColor: config.color,
                        backgroundColor: config.color + '20',
                        fill: true,
                        tension: 0.4,
                        pointRadius: 3,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                title: (items) => items[0].label,
                                label: (item) => `${config.name}: ${item.raw}${config.unit === '%' ? '%' : (config.unit === 'USD' ? ' USD' : '')}`
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            title: { display: true, text: 'æœˆä»½', color: '#888', font: { size: 10 } },
                            ticks: { color: '#888', font: { size: 9 } },
                            grid: { color: 'rgba(255,255,255,0.05)' }
                        },
                        y: {
                            display: true,
                            title: { display: true, text: config.unit, color: '#888', font: { size: 10 } },
                            ticks: { 
                                color: '#888', 
                                font: { size: 9 },
                                callback: (value) => {
                                    if (config.unit === 'USD') return '$' + value;
                                    if (config.unit === 'å…†ç¾å…ƒ') return value + 'å…†';
                                    if (config.unit === '%') return value + '%';
                                    return value;
                                }
                            },
                            grid: { color: 'rgba(255,255,255,0.05)' }
                        }
                    }
                }
            });
        }
        
        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>
